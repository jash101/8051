;SQUARE WAVE AT P1.4 AT 2 KILOHERTZ FREQUENCY
START:
	   CPL P1.4
	   CALL DELAY

	   SJMP START
	
;GENERATE A DELAY OF 2 kHZ
DELAY:
	   MOV R0, #1H	 ;50 MILISECONDS * 20 TIMES
UP:    MOV TMOD, #10H;TIMER MODE SELECTION
	   MOV TL1, #06H ;LOAD TL COUNTER VALUE
	   MOV TH1, #0FFH  ;LOAD TH COUNTER VALUE
	   SETB TR1		 ;START TIMER
	   
HERE:
	   JNB TF1, HERE  ;WAIT TILL TF = 1 (OVERFLOW)
	   
	   CLR TR1		;STOP TIMER
	   CLR TF1		;CLEAR TF1
	   DJNZ R0, UP	;
	   
	   RETI
	   
	   END
